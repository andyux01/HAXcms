import{html as t,LitElement as e}from"../../../../../lit/index.js";import{store as i}from"../../core/haxcms-site-store.js";import{autorun as n,toJS as o}from"../../../../../mobx/dist/mobx.esm.js";class SiteRegion extends e{static get tag(){return"site-region"}static get properties(){return{name:{type:String},contentItemId:{type:String}}}constructor(){super(),this.name=null,this.__disposer=this.__disposer?this.__disposer:[],n((t=>{const e=o(i.regionData);this.name&&e[this.name]&&(this.contentItemId=e[this.name]),this.__disposer.push(t)}))}updated(t){t.forEach(((t,e)=>{if(this.shadowRoot){if("name"===e&&this[e]){const t=o(i.regionData);t[this.name]&&(this.contentItemId=t[this.name])}if("contentItemId"===e&&this[e]){let t=i.findItem(this.contentItemId);t&&t.location&&fetch(t.location,{method:"GET",priority:"low"}).then((t=>{if(t.ok)return t.text()})).then((t=>{let e=document.createElement("div");e.innerHTML=t,this.innerHTML=e.innerHTML})).catch((t=>{console.error("regio data not found")}))}}}))}render(){return t`<slot></slot>`}}customElements.define(SiteRegion.tag,SiteRegion);