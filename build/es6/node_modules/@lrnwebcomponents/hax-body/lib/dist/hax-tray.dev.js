Object.defineProperty(exports,"__esModule",{value:!0}),exports.HaxTray=void 0;var t=require("lit-element/lit-element.js"),e=require("@lrnwebcomponents/utils/utils.js"),a=require("@lrnwebcomponents/hax-body-behaviors/lib/HAXFields.js"),n=require("@lrnwebcomponents/simple-popover/lib/SimpleTourFinder"),o=require("./hax-store.js"),i=require("mobx"),r=require("@lrnwebcomponents/hax-body/lib/hax-ui-styles.js");require("@lrnwebcomponents/simple-fields/simple-fields.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icons.js"),require("@lrnwebcomponents/hax-iconset/lib/simple-hax-iconset.js"),require("@lrnwebcomponents/simple-toolbar/simple-toolbar.js"),require("@lrnwebcomponents/simple-toolbar/lib/simple-button-grid.js"),require("./hax-tray-upload.js"),require("./hax-gizmo-browser.js"),require("./hax-app-browser.js"),require("./hax-stax-browser.js"),require("./hax-map.js"),require("./hax-preferences-dialog.js"),require("@lrnwebcomponents/hax-body/lib/hax-toolbar.js"),require("@lrnwebcomponents/hax-body/lib/hax-toolbar-menu.js");var l=require("@lrnwebcomponents/i18n-manager/lib/I18NMixin.js");require("@lrnwebcomponents/undo-manager/undo-manager");function _templateObject21_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral(['\n        :host {\n          display: block;\n          z-index: 1000;\n          position: absolute;\n          height: calc(100vh - var(--hax-tray-top, 0px));\n          top: var(--hax-tray-top, 0px);\n          overflow: auto;\n          font-family: var(--hax-ui-font-family);\n          font-size: var(--hax-ui-font-size);\n          color: var(--hax-ui-color);\n          transition: 0.2s all ease-in-out;\n          transition-delay: 0.3s;\n          transition: 0s color linear !important;\n        }\n        :host(:focus-within),\n        :host(:hover) {\n          z-index: var(--hax-ui-focus-z-index);\n        }\n        :host([collapsed]) {\n          height: unset;\n          transition-delay: 0.3s;\n        }\n        .wrapper {\n          position: fixed;\n          top: 0;\n          width: var(--hax-tray-width);\n          transition: 0.2s all ease-in-out;\n          opacity: 0;\n          visibility: hidden;\n          pointer-events: none;\n          display: flex;\n          flex-direction: column;\n          max-height: 100%;\n          margin: 0;\n          padding: 0;\n        }\n        #wrapper,\n        #wrapper > * {\n          overflow-x: hidden;\n          overflow-y: auto;\n        }\n        :host([element-align="left"]) .wrapper,\n        :host([element-align="bottom-left"]) .wrapper {\n          left: -1000px;\n        }\n        :host([element-align="right"]) .wrapper,\n        :host([element-align="bottom-right"]) .wrapper {\n          right: -1000px;\n        }\n        :host([edit-mode][element-align="left"]) .wrapper,\n        :host([edit-mode][element-align="bottom-left"]) .wrapper {\n          left: 0;\n        }\n        :host([edit-mode][element-align="right"])\n          .wrapper\n          :host([edit-mode][element-align="bottom-right"])\n          .wrapper {\n          right: 0;\n        }\n        :host([edit-mode][element-align="bottom-left"]) .wrapper,\n        :host([edit-mode][element-align="bottom-right"]) .wrapper {\n          top: unset;\n          bottom: 0;\n        }\n        :host([edit-mode][element-align="custom"]) .wrapper {\n          left: var(--hax-tray-custom-x);\n          left: clamp(\n            0px,\n            var(--hax-tray-custom-x),\n            calc(100vw - var(--hax-tray-width))\n          );\n        }\n        :host([edit-mode][collapsed][element-align="custom"]) .wrapper {\n          top: var(--hax-tray-custom-y);\n          top: clamp(0px, var(--hax-tray-custom-y), calc(100vh - 34px));\n        }\n        :host([edit-mode]) .wrapper {\n          opacity: 1;\n          visibility: visible;\n          right: 0;\n          pointer-events: all;\n        }\n        #tray-detail {\n          flex: 1 1 auto;\n          overflow-y: auto;\n          max-height: 100vh;\n          border: 1px solid var(--hax-ui-border-color);\n          border-top: 0px solid var(--hax-ui-border-color);\n          max-width: calc(var(--hax-tray-width) - 2 * var(--hax-ui-spacing-xs));\n          background-color: var(--hax-ui-background-color);\n          padding: 0 var(--hax-ui-spacing-lg) var(--hax-ui-spacing);\n          transition: all 0.3s linear;\n          transition: 0s background-color linear !important;\n          transition: 0s border-color linear !important;\n        }\n        :host([edit-mode][collapsed]) #tray-detail {\n          left: unset !important;\n          right: unset !important;\n          max-height: 0vh;\n          border-bottom: 0px solid var(--hax-ui-border-color);\n          padding: 0 var(--hax-ui-spacing-lg) 0;\n          max-width: calc(100% - 2 * var(--hax-ui-spacing-lg) - 2px);\n          transition: all 0.3s linear;\n          transition: 0s background-color linear !important;\n          transition: 0s border-color linear !important;\n        }\n        #tray-detail[hidden] {\n          height: 0px;\n        }\n        hax-toolbar {\n          flex: 0 0 auto;\n          border: none;\n          background-color: var(--hax-ui-background-color);\n          width: var(--hax-tray-width);\n          transition: all 0.5s ease-in-out;\n          transition: 0s color linear !important;\n          transition: 0s background-color linear !important;\n          transition: 0s border-color linear !important;\n        }\n        simple-button-grid {\n          background-color: var(--hax-ui-background-color);\n          padding: var(--hax-ui-spacing-xs);\n          border-bottom: none;\n        }\n        hax-toolbar .group,\n        simple-button-grid .group {\n          border: none;\n          margin: 0;\n          padding: 0;\n        }\n        hax-toolbar .group {\n          justify-content: space-around;\n          flex: 0 0 auto;\n        }\n        hax-toolbar *[feature]::part(button) {\n          border: 1px solid var(--hax-ui-color-accent-secondary);\n        }\n        :host([edit-mode][collapsed]) hax-toolbar.tray-detail-ops {\n          border-bottom: 1px solid var(--hax-ui-border-color);\n        }\n        #menugroup {\n          flex: 1 1 auto;\n        }\n        #menugroup > * {\n          align-items: flex-start;\n          flex: 0 0 50%;\n        }\n        #haxcancelbutton::part(dropdown-icon) {\n          display: none;\n        }\n        #contentgroup > * {\n          --simple-toolbar-button-white-space: wrap;\n        }\n        #top-left::part(icon),\n        #bottom-right::part(icon) {\n          transform: rotate(45deg);\n        }\n        #top-right::part(icon),\n        #bottom-left::part(icon) {\n          transform: rotate(-45deg);\n        }\n        #content-map::part(icon) {\n          transform: rotate(180deg);\n        }\n        hax-toolbar,\n        hax-tray-button,\n        hax-app-browser,\n        hax-gizmo-browser {\n          transition: 0.2s all ease-in-out;\n          transition: 0s color linear !important;\n          transition: 0s background-color linear !important;\n          transition: 0s border-color linear !important;\n          visibility: visible;\n        }\n        #tray-grid {\n          flex: 0 0 auto;\n          border: 1px solid var(--hax-ui-border-color);\n        }\n        #tray-grid hax-tray-button::part(button) {\n          border: 1px solid var(--hax-ui-border-color);\n        }\n        #tray-grid > hax-tray-button::part(button) {\n          --simple-toolbar-button-white-space: normal !important;\n        }\n        #tray-grid #haxsavebutton {\n          grid-column: 1 / 4;\n        }\n        hax-toolbar:not(:defined),\n        hax-tray-button:not(:defined),\n        hax-app-browser:not(:defined),\n        hax-gizmo-browser:not(:defined) {\n          visibility: hidden;\n        }\n        hax-tray-upload {\n          flex: 0 0 auto;\n        }\n        *[hidden] {\n          display: none;\n        }\n        #settingscollapse div[slot="content"] {\n          padding: 0;\n          margin: 0;\n        }\n        :host([element-align="right"]) #button {\n          right: 0;\n        }\n        :host([element-align="left"]) #button {\n          left: 0;\n        }\n\n        #button {\n          position: fixed;\n          top: 0;\n          visibility: visible;\n          margin: var(--hax-ui-spacing-xs);\n        }\n        :host([edit-mode]) #button {\n          visibility: hidden;\n          opacity: 0;\n        }\n        #button:hover {\n          opacity: 1;\n        }\n        /** This is mobile layout for controls */\n        @media screen and (max-width: 800px) {\n          .wrapper {\n            top: 0;\n            left: 0;\n            right: 0;\n            margin: 0 !important;\n          }\n          #toggle-element-align {\n            display: none;\n          }\n        }\n        @media screen and (max-width: 600px) {\n          :host([edit-mode]) .hide-small {\n            display: none;\n          }\n        }\n      ']);return _templateObject21_90a0a93091ad11eb950c05786044fa93=function _templateObject21_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject20_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral([' <hax-tray-upload ?hidden="','"></hax-tray-upload>\n      <h5 ?hidden="','">','</h5>\n      <hax-app-browser id="appbrowser" ?hidden="','"></hax-app-browser>']);return _templateObject20_90a0a93091ad11eb950c05786044fa93=function _templateObject20_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject19_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral(['<hax-map\n      controls="content-map-tray"\n      ?hidden="','"\n    ></hax-map>']);return _templateObject19_90a0a93091ad11eb950c05786044fa93=function _templateObject19_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject18_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral([' <hax-gizmo-browser\n        id="gizmobrowser"\n        ?hidden="','"\n      ></hax-gizmo-browser>\n      <h5 ?hidden="','">','</h5>\n      <hax-stax-browser\n        id="staxbrowser"\n        ?hidden="','"\n      ></hax-stax-browser>']);return _templateObject18_90a0a93091ad11eb950c05786044fa93=function _templateObject18_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject17_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral([' <simple-fields\n      id="settingsform"\n      disable-responsive\n      code-theme="','"\n      ?hidden="','"\n    ></simple-fields>']);return _templateObject17_90a0a93091ad11eb950c05786044fa93=function _templateObject17_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject16_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral([' <hax-preferences-dialog\n      id="advanced-settings-tray"\n      ?hidden="','"\n    ></hax-preferences-dialog>']);return _templateObject16_90a0a93091ad11eb950c05786044fa93=function _templateObject16_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject15_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral([' <div\n      id="tray-detail"\n      aria-live="polite"\n      aria-disabled="','"\n      tabindex="','"\n      selected-detail="','"\n    >\n      <h4>\n        ',"\n      </h4>\n      "," ","\n      "," ","\n      ","\n    </div>"]);return _templateObject15_90a0a93091ad11eb950c05786044fa93=function _templateObject15_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject14_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral([' <hax-toolbar class="quick-buttons tray-detail-ops">\n      <div id="contentgroup" class="group">','</div>\n      <div id="mapgroup" class="group">','</div>\n      <div id="settingsgroup" class="group">',"</div>\n    </hax-toolbar>"]);return _templateObject14_90a0a93091ad11eb950c05786044fa93=function _templateObject14_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject13_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral(['\n      <hax-tray-button\n        ?hidden="','"\n        id="advanced-settings"\n        event-name="advanced-settings"\n        icon="settings"\n        label="','"\n        voice-command="open preferences"\n        show-text-label\n        icon-position="top"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n      >\n        <div data-stop-content>\n          Some advanced options for developers and experimental purposes.\n        </div>\n      </hax-tray-button>\n    ']);return _templateObject13_90a0a93091ad11eb950c05786044fa93=function _templateObject13_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject12_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral(['\n      <hax-tray-button\n        event-name="content-map"\n        icon="icons:toc"\n        id="content-map"\n        label="','"\n        show-text-label\n        icon-position="top"\n        voice-command="open map"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n      >\n        <div data-stop-content>\n          This is a simple list of all the block areas of the page that are\n          clickable to jump through items quickly as well as review some simple\n          overview stats.\n        </div>\n      </hax-tray-button>\n    ']);return _templateObject12_90a0a93091ad11eb950c05786044fa93=function _templateObject12_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject11_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral([' <hax-tray-button\n        event-name="content-edit"\n        icon="build"\n        id="content-edit"\n        label="','"\n        ?disabled="','"\n        voice-command="(modify)(configure)(edit) selected"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        show-text-label\n        icon-position="top"\n        tooltip="'," ",'"\n        toggles\n        ?toggled="','"\n      >\n        <div slot="tour" data-stop-content>\n          When you want to add any content to the page from text, to images, to\n          anything more advanced; you can always find items to add under the Add\n          content menu. Click to expand, then either drag and drop items into\n          the page or click and have them placed near whatever you are actively\n          working on.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        event-name="content-add"\n        icon="add-box"\n        id="content-add"\n        label="','"\n        voice-command="blocks"\n        show-text-label\n        icon-position="top"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n      >\n        <div slot="tour" data-stop-content>\n          When you want to add any content to the page from text, to images, to\n          anything more advanced; you can always find items to add under the Add\n          content menu. Click to expand, then either drag and drop items into\n          the page or click and have them placed near whatever you are actively\n          working on.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        event-name="media-add"\n        icon="image:collections"\n        id="media-add"\n        label="','"\n        show-text-label\n        icon-position="top"\n        voice-command="Media"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n      >\n        <div slot="tour" data-stop-content>\n          Search for media and content anywhere that your copy of HAX has access\n          to. Pick what to search, perform the search and then click or drag the\n          item into the contnet.\n        </div>\n      </hax-tray-button>']);return _templateObject11_90a0a93091ad11eb950c05786044fa93=function _templateObject11_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject10_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral([' <hax-toolbar class="quick-buttons collapse-menu">\n      <div id="savegroup" class="ops group">','</div>\n      <div id="dogroup" class="group">','</div>\n      <slot name="tray-buttons-pre"></slot>\n      <div id="source" class="group">',"</div>\n    </hax-toolbar>"]);return _templateObject10_90a0a93091ad11eb950c05786044fa93=function _templateObject10_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject9_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral([' <hax-tray-button\n      id="exportbtn"\n      icon="code"\n      label="','"\n      voice-command="view (page) source"\n      data-simple-tour-stop\n      data-stop-title="label"\n      icon-position="top"\n      show-text-label\n    >\n      <div data-stop-content>\n        Every change you make in HAX is ultimately writing HTML. Know HTML?\n        Awesome, pop open the source view and make any changes you like. HTML is\n        always behind the scenes ensuring that content is portable, well\n        formatted and easy to read.\n      </div>\n    </hax-tray-button>']);return _templateObject9_90a0a93091ad11eb950c05786044fa93=function _templateObject9_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject8_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral([' <hax-tray-button\n        icon="icons:undo"\n        ?disabled="','"\n        label="','"\n        event-name="undo"\n        voice-command="undo"\n        class="hide-small"\n        data-simple-tour-stop\n        data-stop-title="label"\n        icon-position="top"\n        show-text-label\n      >\n        <div slot="tour" data-stop-content>\n          Undo the previous operation in the content, whether typing or adding a\n          widget.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        icon="icons:redo"\n        ?disabled="','"\n        label="','"\n        event-name="redo"\n        voice-command="redo"\n        class="hide-small"\n        data-simple-tour-stop\n        data-stop-title="label"\n        icon-position="top"\n        show-text-label\n      >\n        <div slot="tour" data-stop-content>\n          Redo the last action that you hit Undo on.\n        </div>\n      </hax-tray-button>']);return _templateObject8_90a0a93091ad11eb950c05786044fa93=function _templateObject8_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject7_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral(['\n          <hax-tray-button\n            @click="','"\n            icon="save"\n            icon-position="top"\n            id="haxsavebutton"\n            label="','"\n            event-name="save"\n            voice-command="save (content)(page)"\n            show-text-label\n          ></hax-tray-button>\n          <hax-toolbar-menu\n            icon="close"\n            id="haxcancelbutton"\n            label="','"\n            icon-position="top"\n            show-text-label\n            warning\n          >\n            <simple-toolbar-menu-item slot="menuitem">\n              <hax-tray-button\n                role="menuitem"\n                danger\n                align-horizontal="left"\n                icon="close"\n                id="haxcancelbutton"\n                label="','"\n                event-name="cancel"\n                voice-command="cancel"\n                icon-position="left"\n                show-text-label\n              ></hax-tray-button>\n            </simple-toolbar-menu-item>\n          </hax-toolbar-menu>\n        ']);return _templateObject7_90a0a93091ad11eb950c05786044fa93=function _templateObject7_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject6_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral([' <hax-toolbar id="menubar" class="quick-buttons collapse-menu"\n      >',"</hax-toolbar\n    >"]);return _templateObject6_90a0a93091ad11eb950c05786044fa93=function _templateObject6_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject5_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral(['\n      <div id="menugroup" class="group collapse-menu">\n        <hax-toolbar-menu\n          ?disabled="','"\n          id="drag"\n          feature\n          action\n          icon="hax:arrow-all"\n          label="','"\n          draggable="true"\n          reset-on-select\n          data-simple-tour-stop\n          data-stop-title="','"\n          show-text-label\n          @dragstart="','"\n          @dragend="','"\n        >\n          <simple-toolbar-menu-item slot="menuitem">\n            <hax-tray-button\n              role="menuitem"\n              show-text-label\n              align-horizontal="left"\n              voice-command="toggle alignment"\n              id="top-left"\n              event-name="toggle-element-align"\n              icon="arrow-back"\n              label="','"\n              index="0"\n              ?disabled="','"\n              ?toggled="','"\n            >\n            </hax-tray-button>\n          </simple-toolbar-menu-item>\n          <simple-toolbar-menu-item slot="menuitem">\n            <hax-tray-button\n              role="menuitem"\n              show-text-label\n              align-horizontal="left"\n              voice-command="toggle alignment"\n              id="top-right"\n              event-name="toggle-element-align"\n              icon="arrow-forward"\n              label="','"\n              index="1"\n              ?disabled="','"\n              ?toggled="','"\n            >\n              >\n            </hax-tray-button>\n          </simple-toolbar-menu-item>\n          <simple-toolbar-menu-item slot="menuitem">\n            <hax-tray-button\n              role="menuitem"\n              show-text-label\n              align-horizontal="left"\n              voice-command="toggle alignment"\n              id="bottom-left"\n              event-name="toggle-element-align"\n              icon="arrow-back"\n              text-align="left"\n              label="','"\n              ?disabled="','"\n              ?toggled="','"\n              index="2"\n            >\n            </hax-tray-button>\n          </simple-toolbar-menu-item>\n          <simple-toolbar-menu-item slot="menuitem">\n            <hax-tray-button\n              role="menuitem"\n              show-text-label\n              align-horizontal="left"\n              voice-command="toggle alignment"\n              id="bottom-right"\n              event-name="toggle-element-align"\n              icon="arrow-forward"\n              label="','"\n              text-align="left"\n              ?disabled="','"\n              ?toggled="','"\n              index="3"\n            >\n              >\n            </hax-tray-button>\n          </simple-toolbar-menu-item>\n          <div slot="tour" data-stop-title>','</div>\n          <div slot="tour" data-stop-content>','</div>\n        </hax-toolbar-menu>\n        <hax-tray-button\n          feature\n          voice-command="toggle menu"\n          id="toggle-tray-size"\n          event-name="toggle-tray-size"\n          show-text-label\n          icon="','"\n          label="','"\n          data-simple-tour-stop\n          show-text-label\n          text-align="left"\n        >\n          <div data-stop-title>',"</div>\n          <div data-stop-content>",'</div>\n        </hax-tray-button>\n      </div>\n      <div class="group" id="tourgroup">\n        <hax-tray-button\n          feature\n          event-name="','"\n          icon="help"\n          label="','"\n          voice-command="start tour"\n          toggles\n          ?toggled="','"\n        ></hax-tray-button>\n      </div>\n    ']);return _templateObject5_90a0a93091ad11eb950c05786044fa93=function _templateObject5_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject4_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral(['<simple-button-grid id="tray-grid" columns="4" rows="3">\n      ',""," ","\n      ",'\n      <slot name="tray-buttons-pre"></slot>\n      '," ","\n    </simple-button-grid>"]);return _templateObject4_90a0a93091ad11eb950c05786044fa93=function _templateObject4_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject3_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral(["","",""]);return _templateObject3_90a0a93091ad11eb950c05786044fa93=function _templateObject3_90a0a93091ad11eb950c05786044fa93(){return t},t}function _templateObject2_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral(['\n          <hax-tray-button\n            large\n            voice-command="edit page"\n            .data-opened="','"\n            @click="','"\n            icon="create"\n            id="button"\n            feature\n            show-text-label\n            label="','"\n          ></hax-tray-button>\n        ']);return _templateObject2_90a0a93091ad11eb950c05786044fa93=function _templateObject2_90a0a93091ad11eb950c05786044fa93(){return t},t}function ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(a,!0).forEach((function(e){_defineProperty(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _templateObject_90a0a93091ad11eb950c05786044fa93(){var t=_taggedTemplateLiteral(["\n      ",'\n      <div class="wrapper" part="hax-tray-wrapper">\n        ',"\n        ","","\n      </div>\n    "]);return _templateObject_90a0a93091ad11eb950c05786044fa93=function _templateObject_90a0a93091ad11eb950c05786044fa93(){return t},t}function _taggedTemplateLiteral(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return t},t}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,e,a){var n=function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(a):o.value}})(t,e,a||t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,e){return t.__proto__=e,t})(t,e)}var s=function(s){function HaxTray(){var t;return function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,HaxTray),(t=function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}(this,_getPrototypeOf(HaxTray).call(this))).tourName="hax",t.__winEvents={"can-redo-changed":"_redoChanged","can-undo-changed":"_undoChanged","hax-drop-focus-event":"_expandSettingsPanel"},t.t={structure:"Structure",structureTip:"View Page Structure",editSelected:"Edit selected",edit:"Edit",save:"Save",move:"Move",moveMenu:"Move menu",menuAlignment:"Menu Alignment",topLeft:"Top Left",topRight:"Top Right",bottomLeft:"Bottom Left",bottomRight:"Bottom Right",menuPosition:"Menu position",changeSideVisually:"Change which side of the screen the menu is affixed to visually.",expand:"Expand",collapse:"Collapse",menuSize:"Menu size",menuSizeDescription:"Expand or collapse the menu visually.",takeATour:"Take a Tour",settings:"Settings",source:"Source",undo:"Undo",redo:"Redo",media:"Media",blocks:"Blocks",cancel:"Cancel",cancelWithoutSaving:"Cancel without saving",configure:"Configure",advanced:"Advanced",layout:"Layout",alignment:"Alignment",left:"Left",center:"Center",right:"Right",search:"Search",templates:"Templates",width:"Width"},t.registerTranslation({context:_assertThisInitialized(t),namespace:"hax",updateCallback:"_updateTrayDetail"}),t._initial=!0,t.activeValue={settings:{layout:{__position:"hax-align-left",__scale:100},configure:{},advanced:{}}},t.collapsed=!1,t.activeTab="item-0",t.activeSchema=[],t.canUndo=!1,t.canRedo=!1,t.elementAlign="right",t.trayDetail="content-edit",t.activeTagName="",t.traySizeIcon="hax:arrow-expand-right",t.__setup=!1,setTimeout((function(){Promise.resolve().then((function(){return function _interopRequireWildcard(t){if(t&&t.__esModule)return t;if(null===t||"object"!==_typeof(t)&&"function"!=typeof t)return{default:t};var e=_getRequireWildcardCache();if(e&&e.has(t))return e.get(t);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=n?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=t[o]}return a.default=t,e&&e.set(t,a),a}(require("./hax-tray-button.js"))})),t.addEventListener("hax-tray-button-click",t._processTrayEvent.bind(_assertThisInitialized(t)))}),0),(0,i.autorun)((function(){t.activeGizmo=(0,i.toJS)(o.HAXStore.activeGizmo)})),(0,i.autorun)((function(){t.activeNode=(0,i.toJS)(o.HAXStore.activeNode)})),(0,i.autorun)((function(){t.tourOpened=(0,i.toJS)(o.HAXStore.tourOpened)})),(0,i.autorun)((function(){t.globalPreferences=(0,i.toJS)(o.HAXStore.globalPreferences),t.haxUiTheme=(t.globalPreferences||{}).haxUiTheme||"hax",document.body.setAttribute("hax-ui-theme",t.haxUiTheme)})),(0,i.autorun)((function(){t.editMode=(0,i.toJS)(o.HAXStore.editMode)})),t}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}(HaxTray,(0,l.I18NMixin)((0,n.SimpleTourFinder)((0,e.winEventsElement)(t.LitElement)))),_createClass(HaxTray,null,[{key:"tag",get:function get(){return"hax-tray"}}]),_createClass(HaxTray,[{key:"_expandSettingsPanel",value:function _expandSettingsPanel(t){this.shadowRoot.querySelector("#content-edit").click()}},{key:"_redoChanged",value:function _redoChanged(t){this.canRedo=t.detail.value}},{key:"_undoChanged",value:function _undoChanged(t){this.canUndo=t.detail.value}},{key:"render",value:function render(){return(0,t.html)(_templateObject_90a0a93091ad11eb950c05786044fa93(),this.panelOpsTemplate,this.menuToolbarTemplate,this.gridTemplate,this.trayDetailTemplate)}},{key:"__simpleFieldsClick",value:function __simpleFieldsClick(t){try{this.activeTab=this.shadowRoot.querySelector("#settingsform").shadowRoot.querySelector("simple-fields").activeTab}catch(t){this.activeTab="item-0"}}},{key:"_refreshAddData",value:function _refreshAddData(){this.shadowRoot.querySelector("#gizmobrowser").resetList((0,i.toJS)(o.HAXStore.gizmoList)),this.shadowRoot.querySelector("#staxbrowser").staxList=_toConsumableArray((0,i.toJS)(o.HAXStore.staxList))}},{key:"_processTrayEvent",value:function _processTrayEvent(t){var a=(0,e.normalizeEventPath)(t)[0];switch(t.detail.eventName){case"insert-stax":this.dispatchEvent(new CustomEvent("hax-insert-content-array",{bubbles:!0,cancelable:!0,composed:!0,detail:a.stax}));break;case"insert-tag":var n,i={tag:t.detail.value},r=o.HAXStore.haxSchemaFromTag(t.detail.value);if(a.getAttribute("data-demo-schema")&&r&&r.demoSchema&&r.demoSchema)n=r.demoSchema[0];else{var l=JSON.parse(a.getAttribute("event-properties")),s=a.getAttribute("event-content");null==l&&(l={}),null==s&&(s=""),n=o.HAXStore.haxElementPrototype(i,l,s)}this.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:n}));break;case"advanced-settings":this.trayDetail=t.detail.eventName,this.collapsed=!1;break;case"toggle-element-align":var c=["left","right","bottom-left","bottom-right"],d=c[t.detail.index]?c[t.detail.index]:"right";t.detail.index>1&&(this.collapsed=!0),this.style.setProperty("--hax-tray-custom-y",null),this.style.setProperty("--hax-tray-custom-x",null),this.elementAlign=d;break;case"toggle-tray-size":this.collapsed=!this.collapsed;break;case"content-map":case"content-edit":case"content-add":case"media-add":this.trayDetail=t.detail.eventName,this.collapsed=!1;break;case"start-tour":this.startTour();break;case"stop-tour":window.SimpleTourManager.requestAvailability().stopTour("hax");break;case"undo":o.HAXStore.activeHaxBody.undo();break;case"redo":o.HAXStore.activeHaxBody.redo();break;case"cancel":confirm("Changes have not been saved, Click OK to close HAX or Cancel to continue editing.")&&(o.HAXStore.editMode=!1,this.dispatchEvent(new CustomEvent("hax-cancel",{bubbles:!0,composed:!0,cancelable:!1,detail:t.detail})))}}},{key:"startTour",value:function startTour(){this.__tour=this.__tour||window.SimpleTourManager.requestAvailability(),window.addEventListener("tour-changed",this._handleTourChanged.bind(this)),this.__tour.startTour("hax")}},{key:"stopTour",value:function stopTour(){this.__tour=this.__tour||window.SimpleTourManager.requestAvailability(),this.__tour.stopTour("hax"),window.removeEventListener("tour-changed",this._handleTourChanged.bind(this))}},{key:"_handleTourChanged",value:function _handleTourChanged(t){this.tourOpened=t.detail.active==this.tourName}},{key:"firstUpdated",value:function firstUpdated(t){var e=this;_get(_getPrototypeOf(HaxTray.prototype),"firstUpdated",this)&&_get(_getPrototypeOf(HaxTray.prototype),"firstUpdated",this).call(this,t),this.__setup||(this.shadowRoot.querySelector("#settingsform").schematizer=a.HaxSchematizer,this.shadowRoot.querySelector("#settingsform").elementizer=a.HaxElementizer,setTimeout((function(){e.shadowRoot.querySelector(".wrapper").style.margin=e.offsetMargin}),1e3),this.__setup=!0,this.shadowRoot.querySelector("#settingsform").addEventListener("click",this.__simpleFieldsClick.bind(this)),this.shadowRoot.querySelector("#settingsform").addEventListener("value-changed",this.__valueChangedEvent.bind(this)),this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxTray",object:this}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) Blocks (menu)",context:this.shadowRoot.querySelector("#content-add"),callback:"click"}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) element settings (menu)",context:this.shadowRoot.querySelector("#advanced-settings"),callback:"click"}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) search (menu)",context:this.shadowRoot.querySelector("#media-add"),callback:"click"}})))}},{key:"updated",value:function updated(t){var e=this;_get(_getPrototypeOf(HaxTray.prototype),"updated",this)&&_get(_getPrototypeOf(HaxTray.prototype),"updated",this).call(this,t),t.forEach((async function(t,a){"editMode"==a&&(e.editMode&&await o.HAXStore.refreshActiveNodeForm(),e._editModeChanged(e.editMode)),"offsetMargin"==a&&setTimeout((function(){e.shadowRoot.querySelector(".wrapper").style.margin=e.offsetMargin}),0),"trayDetail"==a&&e._updateTrayDetail(t),"collapsed"==a&&e[a]&&e._editModeChanged(e.editMode),"activeGizmo"==a&&(e.activeGizmo?(e.activeTagName=e.activeGizmo.title,t&&"content-edit"===e.trayDetail||"content-map"===e.trayDetail||(e.trayDetail="content-edit")):(e.activeTagName="","content-add"!==e.trayDetail&&(e.trayDetail="content-add"))),"activeNode"==a&&(e.activeNode&&e.activeNode.tagName?e.editMode&&o.HAXStore.refreshActiveNodeForm():e.activeTagName="")}))}},{key:"_dragEnd",value:function _dragEnd(t){var a=(0,e.normalizeEventPath)(t)?(0,e.normalizeEventPath)(t)[0]:void 0;a&&a.close(!0),this.collapsed=!0,this.style.setProperty("--hax-tray-custom-y",t.clientY+"px"),this.style.setProperty("--hax-tray-custom-x",t.clientX+"px"),this.elementAlign="custom"}},{key:"_dragStart",value:function _dragStart(t){t.stopPropagation(),t.stopImmediatePropagation();var a=(0,e.normalizeEventPath)(t)?(0,e.normalizeEventPath)(t)[0]:void 0;this.collapsed=!0,a&&a.close(!0)}},{key:"_setupForm",value:function _setupForm(){var t=this,e=this.activeNode;if(this._initial=!0,this.activeValue={settings:{layout:{__position:"hax-align-left",__scale:100},configure:{},advanced:{}}},this.shadowRoot.querySelector("#settingsform").fields=[],this.shadowRoot.querySelector("#settingsform").value={},e.tagName&&o.HAXStore.elementList[e.tagName.toLowerCase()]){var a=o.HAXStore.elementList[e.tagName.toLowerCase()];for(var n in"undefined"===_typeof(a.gizmo.title)?this.humanName=e.tagName.replace("-"," ").toLowerCase():this.humanName=a.gizmo.title,this.activeHaxElement.properties)a.settings.configure.forEach((function(e){e.property===n&&(t.activeValue.settings.configure[n]=t.activeHaxElement.properties[n]),e.attribute===n&&(t.activeValue.settings.configure[n]=t.activeHaxElement.properties[n]),e.slot===n&&(t.activeValue.settings.configure[n]=t.activeHaxElement.properties[n])})),a.settings.advanced.forEach((function(e){e.property===n&&(t.activeValue.settings.advanced[n]=t.activeHaxElement.properties[n]),e.attribute===n&&(t.activeValue.settings.advanced[n]=t.activeHaxElement.properties[n]),e.slot===n&&(t.activeValue.settings.advanced[n]=t.activeHaxElement.properties[n])}));var i=document.createElement("div");i.innerHTML=this.activeHaxElement.content,i.childNodes.forEach((function(e){1===e.nodeType&&"undefined"!==e.innerHTML&&(a.settings.configure.forEach((function(a){a.slot===e.getAttribute("slot")?t.activeValue.settings.configure[a.slot]=e.innerHTML:""!=a.slot||null!=e.getAttribute("slot")&&"null"!=e.getAttribute("slot")||(t.activeValue.settings.configure[a.slot]=e.innerHTML)})),a.settings.advanced.forEach((function(a){a.slot===e.getAttribute("slot")?t.activeValue.settings.advanced[a.slot]=e.innerHTML:""!=a.slot||null!=e.getAttribute("slot")&&"null"!=e.getAttribute("slot")||(t.activeValue.settings.advanced[a.slot]=e.innerHTML)})))})),""!=e.style.width?this.activeValue.settings.layout.__scale=e.style.width.replace("%",""):this.activeValue.settings.layout.__scale=100,"block"==e.style.display&&"0px auto"==e.style.margin&&"right"==e.style.float?this.activeValue.settings.layout.__position="hax-align-right":"block"==e.style.display&&"0px auto"==e.style.margin?this.activeValue.settings.layout.__position="hax-align-center":this.activeValue.settings.layout.__position="hax-align-left",this.activeHaxElement.properties.__scale=this.activeValue.settings.layout.__scale,this.activeHaxElement.properties.__position=this.activeValue.settings.layout.__position,a.settings.configure.forEach((function(t,e){a.settings.configure[e].attribute&&(a.settings.configure[e].property=a.settings.configure[e].attribute),a.settings.configure[e].slot&&(a.settings.configure[e].property=a.settings.configure[e].slot)})),a.settings.advanced.forEach((function(t,e){a.settings.advanced[e].attribute&&(a.settings.advanced[e].property=a.settings.advanced[e].attribute),a.settings.advanced[e].slot&&(a.settings.advanced[e].property=a.settings.advanced[e].slot)})),a.settings.layout=[],a.canPosition&&a.settings.layout.push({property:"__position",title:this.t.alignment,inputMethod:"select",value:this.activeValue.settings.layout.__position,options:{"hax-align-left":this.t.left,"hax-align-center":this.t.center,"hax-align-right":this.t.right}}),a.canScale&&a.settings.layout.push({property:"__scale",title:this.t.width,inputMethod:"slider",value:this.activeValue.settings.layout.__scale,min:a.canScale.min?a.canScale.min:12.5,max:a.canScale.max?a.canScale.max:100,step:a.canScale.step?a.canScale.step:12.5}),this.activeSchema=[{property:"settings",inputMethod:"tabs",properties:[]}];a.settings.configure.length>0?this.activeSchema[0].properties.push({property:"configure",title:this.t.configure,properties:a.settings.configure}):this.activeSchema[0].properties.push({property:"configure",title:this.t.configure,disabled:!0}),a.settings.layout.length>0?this.activeSchema[0].properties.push({property:"layout",title:this.t.layout,properties:a.settings.layout}):this.activeSchema[0].properties.push({property:"layout",title:this.t.layout,disabled:!0}),a.settings.advanced.length>0?this.activeSchema[0].properties.push({property:"advanced",title:this.t.advanced,properties:a.settings.advanced}):this.activeSchema[0].properties.push({property:"advanced",title:this.t.advanced,disabled:!0}),this.__activePropSchema=a,this.shadowRoot.querySelector("#settingsform").fields=this.activeSchema,this.shadowRoot.querySelector("#settingsform").value=this.activeValue}}},{key:"_toArray",value:function _toArray(t){return null==t?[]:Object.keys(t).map((function(e){return t[e]}))}},{key:"updateMap",value:function updateMap(){this.shadowRoot&&this.shadowRoot.querySelector("hax-map")&&"content-map"==this.trayDetail&&this.shadowRoot.querySelector("hax-map").updateHAXMap()}},{key:"_updateTrayDetail",value:function _updateTrayDetail(t){"content-add"==this.trayDetail?(this.trayLabel=this.t.blocks,this._refreshAddData()):"media-add"==this.trayDetail?this.trayLabel=this.t.media:"content-map"==this.trayDetail?(this.trayLabel=this.t.structure,this.shadowRoot.querySelector("hax-map").updateHAXMap()):"advanced-settings"==this.trayDetail?(this.trayLabel=this.t.settings,this.shadowRoot.querySelector("hax-preferences-dialog").reloadPreferencesForm()):"content-edit"!=this.trayDetail||this.activeTagName&&""!=this.activeTagName&&this.activeNode&&this.activeNode.tagName?this.trayDetail&&""!=this.trayDetail?this.trayLabel=void 0:this.trayDetail="content-edit":this.trayDetail="content-add",this.requestUpdate()}},{key:"__valueChangedEvent",value:function __valueChangedEvent(t){var a,n,i,r,l=this;this.editMode&&t.detail.value&&t.detail.value.settings&&function(){var s=t.detail.value.settings,c=function _loop(t){var c=function _loop2(c){if(a=!1,null==s[t][c]||s[t][c].readOnly)l.activeNode.removeAttribute((0,e.camelCaseToDash)(c));else{if("prefix"===c&&""!=s[t][c])l.activeNode.setAttribute("prefix",s[t][c]),a=!0;else if("layout"===t&&"__position"===c)a=!0,l._initial||(clearTimeout(l.__contextValueDebounce),l.__contextValueDebounce=setTimeout((function(){l.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,composed:!0,detail:{eventName:s[t][c],value:s[t][c]}}))}),50));else if("layout"===t&&"__scale"===c)a=!0,l._initial||(clearTimeout(l.__contextSizeDebounce),l.__contextSizeDebounce=setTimeout((function(){l.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,composed:!0,detail:{eventName:"hax-size-change",value:s[t][c]}}))}),50));else if(l.activeNode.hasOwnProperty(c)||l.activeNode.properties&&l.activeNode.properties.hasOwnProperty(c)||null!=s[t][c]&&s[t][c].constructor===Array||null!=s[t][c]&&s[t][c].constructor===Object)try{s[t][c].constructor===Array?l.activeNode[c]=_toConsumableArray(s[t][c]):s[t][c].constructor===Object?l.activeNode[c]=_objectSpread({},s[t][c]):l.activeNode[c]=s[t][c],a=!0}catch(t){console.warn(t),a=!1}else for(n in l.__activePropSchema.settings[t])if(l.__activePropSchema.settings[t][n].slot==c){var d="span";if(l.__activePropSchema.settings[t][n].slotWrapper?d=l.__activePropSchema.settings[t][n].slotWrapper:"code-editor"===l.activeNode.tagName.toLowerCase()&&(d="template"),i=document.createElement(d),l.__activePropSchema.settings[t][n].slotAttributes)for(r in l.__activePropSchema.settings[t][n].slotAttributes)i.setAttribute(r,l.__activePropSchema.settings[t][n].slotAttributes[r]);""!==l.__activePropSchema.settings[t][n].slot&&(i.slot=l.__activePropSchema.settings[t][n].slot),i.innerHTML=s[t][c];var u=i.cloneNode(!0);a=!0,o.HAXStore.isTextElement(l.activeNode)?l.activeNode.innerHTML=i.innerHTML:((0,e.wipeSlot)(l.activeNode,l.__activePropSchema.settings[t][n].slot),l.activeNode.appendChild(u))}if(!a)try{!0===s[t][c]?l.activeNode.setAttribute((0,e.camelCaseToDash)(c),(0,e.camelCaseToDash)(c)):!1===s[t][c]||""===s[t][c]?l.activeNode.removeAttribute((0,e.camelCaseToDash)(c)):l.activeNode.setAttribute((0,e.camelCaseToDash)(c),s[t][c])}catch(e){console.warn(e),console.warn(c,s[t][c])}}};for(var d in s[t])c(d)};for(var d in{advanced:"advanced",configure:"configure",layout:"layout"})c(d)}();setTimeout((function(){l._initial&&(l._initial=!1)}),51)}},{key:"_editModeChanged",value:function _editModeChanged(t){this.shadowRoot.querySelector("#button").icon=t?"save":"create"}},{key:"_clickEditButton",value:function _clickEditButton(t){o.HAXStore.editMode=!0,window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}},{key:"_clickSaveButton",value:function _clickSaveButton(t){o.HAXStore.editMode=!1,this.dispatchEvent(new CustomEvent("hax-save",{bubbles:!0,cancelable:!0,composed:!0,detail:t.detail})),window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}},{key:"panelOpsTemplate",get:function get(){return this.hidePanelOps?"":(0,t.html)(_templateObject2_90a0a93091ad11eb950c05786044fa93(),this.editMode,this._clickEditButton,this.editMode?this.t.save:this.t.edit)}},{key:"toolbarsTemplate",get:function get(){return(0,t.html)(_templateObject3_90a0a93091ad11eb950c05786044fa93(),this.opsToolbarTemplate,this.trayToolbarTemplate)}},{key:"gridTemplate",get:function get(){return(0,t.html)(_templateObject4_90a0a93091ad11eb950c05786044fa93(),this.saveButtons,this.doButtons,this.sourceButton,this.settingsButton,this.contentButtons,this.mapButton)}},{key:"menuButtons",get:function get(){return(0,t.html)(_templateObject5_90a0a93091ad11eb950c05786044fa93(),this.hasActiveEditingElement,this.t.moveMenu,this.t.menuAlignment,this._dragStart,this._dragEnd,this.t.topLeft,"left"==this.elementAlign,"left"==this.elementAlign,this.t.topRight,"right"==this.elementAlign,"right"==this.elementAlign,this.t.bottomLeft,"bottom-left"==this.elementAlign,"bottom-left"==this.elementAlign,this.t.bottomRight,"bottom-right"==this.elementAlign,"bottom-right"==this.elementAlign,this.t.menuPosition,this.t.changeSideVisually,this.collapsed?"unfold-more":"unfold-less",this.collapsed?this.t.expand:this.t.collapse,this.t.menuSize,this.t.menuSizeDescription,this.tourOpened?"stop-tour":"start-tour",this.t.takeATour,this.tourOpened)}},{key:"menuToolbarTemplate",get:function get(){return(0,t.html)(_templateObject6_90a0a93091ad11eb950c05786044fa93(),this.menuButtons)}},{key:"saveButtons",get:function get(){return this.hidePanelOps?"":(0,t.html)(_templateObject7_90a0a93091ad11eb950c05786044fa93(),this._clickSaveButton,this.editMode?this.t.save:this.t.edit,this.t.cancel,this.t.cancelWithoutSaving)}},{key:"doButtons",get:function get(){return(0,t.html)(_templateObject8_90a0a93091ad11eb950c05786044fa93(),!this.canUndo,this.t.undo,!this.canRedo,this.t.redo)}},{key:"sourceButton",get:function get(){return(0,t.html)(_templateObject9_90a0a93091ad11eb950c05786044fa93(),this.t.source)}},{key:"opsToolbarTemplate",get:function get(){return(0,t.html)(_templateObject10_90a0a93091ad11eb950c05786044fa93(),this.saveButtons,this.doButtons,this.sourceButton)}},{key:"contentButtons",get:function get(){return(0,t.html)(_templateObject11_90a0a93091ad11eb950c05786044fa93(),this.t.edit,!this.activeTagName||""==this.activeTagName||!this.activeNode||!this.activeNode.tagName,this.t.editSelected,this.activeTagName,"content-edit"===this.trayDetail,this.t.blocks,"content-add"===this.trayDetail,this.t.media,"media-add"===this.trayDetail)}},{key:"mapButton",get:function get(){return(0,t.html)(_templateObject12_90a0a93091ad11eb950c05786044fa93(),this.t.structure,"content-map"===this.trayDetail)}},{key:"settingsButton",get:function get(){return(0,t.html)(_templateObject13_90a0a93091ad11eb950c05786044fa93(),this.hidePreferencesButton,this.t.settings,"advanced-settings"===this.trayDetail)}},{key:"trayToolbarTemplate",get:function get(){return(0,t.html)(_templateObject14_90a0a93091ad11eb950c05786044fa93(),this.contentButtons,this.mapButton,this.settingsButton)}},{key:"trayDetailTemplate",get:function get(){return(0,t.html)(_templateObject15_90a0a93091ad11eb950c05786044fa93(),this.collapsed?"true":"false",this.collapsed?"-1":"0",this.trayDetail,this.trayLabel||"".concat(this.t.editSelected," ").concat(this.activeTagName),this.advancedSettingsTemplate,this.contentMapTemplate,this.contentEditTemplate,this.contentAddTemplate,this.mediaTemplate)}},{key:"advancedSettingsTemplate",get:function get(){return(0,t.html)(_templateObject16_90a0a93091ad11eb950c05786044fa93(),"advanced-settings"!==this.trayDetail)}},{key:"contentEditTemplate",get:function get(){return(0,t.html)(_templateObject17_90a0a93091ad11eb950c05786044fa93(),"system"==this.haxUiTheme?"auto":"haxdark"==this.haxUiTheme?"vs-dark":"vs","content-edit"!==this.trayDetail)}},{key:"contentAddTemplate",get:function get(){var e="content-add"!==this.trayDetail;return(0,t.html)(_templateObject18_90a0a93091ad11eb950c05786044fa93(),e,e,this.t.templates,e)}},{key:"contentMapTemplate",get:function get(){return(0,t.html)(_templateObject19_90a0a93091ad11eb950c05786044fa93(),"content-map"!==this.trayDetail)}},{key:"mediaTemplate",get:function get(){var e="media-add"!==this.trayDetail;return(0,t.html)(_templateObject20_90a0a93091ad11eb950c05786044fa93(),e,e,this.t.search,e)}}],[{key:"styles",get:function get(){return[].concat(_toConsumableArray(_get(_getPrototypeOf(HaxTray),"styles",this)||[]),_toConsumableArray(r.HaxTrayDetail),_toConsumableArray(r.HaxComponentStyles),[(0,t.css)(_templateObject21_90a0a93091ad11eb950c05786044fa93())])}},{key:"properties",get:function get(){return _objectSpread({},_get(_getPrototypeOf(HaxTray),"properties",this),{offsetMargin:{type:String,attribute:"offset-margin"},collapsed:{type:Boolean,reflect:!0},traySizeIcon:{type:String},activeValue:{type:Object},activeSchema:{type:Object},elementAlign:{type:String,reflect:!0,attribute:"element-align"},light:{type:Boolean,reflect:!0},canUndo:{type:Boolean,attribute:"can-undo"},canRedo:{type:Boolean,attribute:"can-redo"},haxUiTheme:{type:String},hidePreferencesButton:{type:Boolean,reflect:!0,attribute:"hide-preferences-button"},hidePanelOps:{type:Boolean,reflect:!0,attribute:"hide-panel-ops"},globalPreferences:{type:Object},activeNode:{type:Object},activeTagName:{type:String},activeGizmo:{type:Object},editMode:{type:Boolean,reflect:!0,attribute:"edit-mode"},trayDetail:{type:String},trayLabel:{type:String},tourOpened:{type:String},__tour:{type:Object}})}}]),HaxTray}();exports.HaxTray=s,window.customElements.define(s.tag,s);