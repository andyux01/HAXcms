import{LitElement as t,html as e,css as s}from"../../../lit-element/lit-element.js";import"./hax-tray-button.js";import{HAXStore as a}from"./hax-store.js";import{autorun as i,toJS as r}from"../../../mobx/dist/mobx.esm.js";class HaxAppBrowser extends t{static get styles(){return[s`
        :host {
          display: block;
        }
        :host *[hidden] {
          display: none;
        }
        .toolbar-inner {
          display: block;
          padding: 0;
          width: 100%;
        }
        .item-wrapper {
          text-align: center;
        }
      `]}constructor(){super(),this.addEventListener("hax-tray-button-click",t=>{"search-selected"===t.detail.eventName&&(this.searching=!0,a.activeApp=r(this.appList[t.detail.index]))}),this.searching=!1,this.appList=[],this.activeApp=null,this.hasActive=!1,import("./hax-app-search.js"),i(()=>{this.appList=r(a.appList)}),i(()=>{this.activeApp=r(a.activeApp)})}render(){return e`
      <div class="item-wrapper">
        ${this.appList.map(t=>e`
            <hax-tray-button
              dark-bg
              index="${t.index}"
              label="${t.details.title}"
              icon="${t.details.icon}"
              color="${t.details.color}"
              event-name="search-selected"
              event-data="${t.index}"
            ></hax-tray-button>
          `)}
      </div>
      <hax-app-search
        id="haxappsearch"
        .hidden="${!this.searching}"
      ></hax-app-search>
      <slot></slot>
    `}static get tag(){return"hax-app-browser"}static get properties(){return{search:{type:String},searching:{type:Boolean,reflect:!0},activeApp:{type:Object},hasActive:{reflect:!0,type:Boolean,attribute:"has-active"},appList:{type:Array}}}updated(t){t.forEach((t,e)=>{"activeApp"==e&&this[e]&&this._activeAppChanged(this[e],t),"appList"==e&&this[e]&&this.shadowRoot&&this.resetBrowser()})}_activeAppChanged(t,e){this.hasActive=void 0!==e&&null!=t}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),this.resetBrowser()}resetBrowser(){this.searching=!1}}window.customElements.define(HaxAppBrowser.tag,HaxAppBrowser);export{HaxAppBrowser};